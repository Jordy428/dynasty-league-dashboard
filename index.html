<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dynasty League Dashboard</title>
  <style>
    /* — Global Styles */
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans‑serif;
      background-color: #f8f9fa;
      color: #333;
    }
    a { text-decoration: none; color: inherit; }
    h1, h2 { margin: 0; padding: 0; }

    /* — Header / Nav */
    header {
      background-color: #0d1f3c; /* navy */
      color: #fff;
      padding: 20px 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header .logo {
      font-size: 1.8em;
      font-weight: bold;
    }
    header nav a {
      margin-left: 20px;
      font-size: 1em;
      color: #fff;
    }
    header nav a:hover {
      color: #ff4b3e; /* accent red/orange */
    }

    /* — Hero Section */
    .hero {
      background-color: #1a2b4d;
      color: #fff;
      text-align: center;
      padding: 40px 20px;
    }
    .hero p {
      font-size: 1.2em;
      margin-top: 10px;
    }

    /* — Main content container */
    .container {
      padding: 20px 40px;
    }
    .section {
      margin-bottom: 50px;
    }
    .section h2 {
      border-bottom: 3px solid #ff4b3e;
      padding-bottom: 8px;
      margin-bottom: 15px;
      color: #0d1f3c;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #d1d1d1;
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #e9ecef;
      color: #0d1f3c;
    }
    tr:nth-child(even) {
      background-color: #fff;
    }
    tr:nth-child(odd) {
      background-color: #f2f4f7;
    }

    /* — Responsive adjustments */
    @media (max-width: 768px) {
      header { flex-direction: column; align-items: flex-start; }
      header nav { margin-top: 10px; }
      .container { padding: 20px; }
      table, th, td { font-size: 0.9em; }
    }

  </style>
</head>
<body>

  <header>
    <div class="logo">Your League Name</div>
    <nav>
      <a href="#leagueInfo">League Info</a>
      <a href="#standings">Standings</a>
      <a href="#rosters">Rosters</a>
      <a href="#transactions">Trades</a>
    </nav>
  </header>

  <div class="hero">
    <h1>Dynasty League Dashboard</h1>
    <p>Tracking rosters • standings • transactions • trades – for the 2025 season</p>
  </div>

  <div class="container">
    <div class="section" id="leagueInfo">
      <h2>League Info</h2>
      <div id="leagueDetails">Loading…</div>
    </div>

    <div class="section" id="standings">
      <h2>Standings</h2>
      <div id="standingsTable">Loading…</div>
    </div>

    <div class="section" id="rosters">
      <h2>Rosters</h2>
      <div id="rostersTable">Loading…</div>
    </div>

    <div class="section" id="transactions">
      <h2>Transactions / Trades</h2>
      <div id="transactionsTable">Loading…</div>
    </div>
  </div>

  <script>
    const leagueId = "1181314304454733824";
    const baseUrl = "https://api.sleeper.app/v1";

    async function fetchJson(url) {
      const resp = await fetch(url);
      if (!resp.ok) throw new Error("Network response was not ok");
      return await resp.json();
    }

    async function loadLeagueInfo() {
      const data = await fetchJson(`${baseUrl}/league/${leagueId}`);
      document.getElementById("leagueDetails").innerHTML =
        `<strong>Name:</strong> ${data.name} <br>` +
        `<strong>Season:</strong> ${data.season} <br>` +
        `<strong>Status:</strong> ${data.status}`;
    }

    async function loadRostersAndUsers() {
      const [rosters, users] = await Promise.all([
        fetchJson(`${baseUrl}/league/${leagueId}/rosters`),
        fetchJson(`${baseUrl}/league/${leagueId}/users`)
      ]);
      const userMap = {};
      users.forEach(u => userMap[u.user_id] = u.display_name || u.username);
      let html = "<table><tr><th>Team (Owner)</th><th>Players</th></tr>";
      rosters.forEach(r => {
        const owner = userMap[r.owner_id] || r.owner_id;
        const players = r.players.join(", ");
        html += `<tr><td>${owner}</td><td>${players}</td></tr>`;
      });
      html += "</table>";
      document.getElementById("rostersTable").innerHTML = html;
    }

    async function loadStandings() {
      const rosters = await fetchJson(`${baseUrl}/league/${leagueId}/rosters`);
      const users = await fetchJson(`${baseUrl}/league/${leagueId}/users`);
      const userMap = {};
      users.forEach(u => userMap[u.user_id] = u.display_name || u.username);

      let html = "<table><tr><th>Team (Owner)</th><th>Wins</th><th>Losses</th><th>Points For</th></tr>";
      rosters
        .sort((a,b) => b.settings.wins - a.settings.wins)
        .forEach(r => {
          const owner = userMap[r.owner_id] || r.owner_id;
          const pf = r.settings.points_for ?? 0;
          html += `<tr><td>${owner}</td><td>${r.settings.wins}</td><td>${r.settings.losses}</td><td>${pf.toFixed(2)}</td></tr>`;
        });
      html += "</table>";
      document.getElementById("standingsTable").innerHTML = html;
    }

    async function loadTransactions() {
      let html = "<table><tr><th>Week</th><th>Type</th><th>Date</th><th>Details</th></tr>";
      for (let week = 1; week <= 18; week++) {
        try {
          const data = await fetchJson(`${baseUrl}/league/${leagueId}/transactions/${week}`);
          data.forEach(t => {
            const date = new Date(t.created * 1000).toLocaleString();
            html += `<tr><td>${week}</td><td>${t.type}</td><td>${date}</td><td>${JSON.stringify(t)}</td></tr>`;
          });
        } catch (e) {
          console.log(`No data for week ${week}`);
        }
      }
      html += "</table>";
      document.getElementById("transactionsTable").innerHTML = html;
    }

    async function init() {
      try {
        await loadLeagueInfo();
        await loadStandings();
        await loadRostersAndUsers();
        await loadTransactions();
      } catch (err) {
        console.error(err);
        alert("Error loading data — check console");
      }
    }

    init();
  </script>

</body>
</html>

